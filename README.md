# **프로젝트 문서**
## 📌 **프로젝트 이름**: 주식 관리 시스템
### **프로젝트 개요**
주식 관리 시스템은 사용자별로 주식 관련 설정, 매수/매도 규칙, 알림 및 관리 기능을 제공하는 프로젝트입니다. 유저는 자신이 설정한 주식 규칙을 기반으로 특정 조건에서 알림을 받고, 설정된 내용을 게스트와 공유하여 주식 매매 관리를 진행할 수 있습니다. 또한, 실시간 데이터 크롤링 및 관리 프로세스를 통해 실시간으로 정확한 데이터를 제공받으며, 효율적인 채팅 및 알림 기능도 지원합니다.

---

## 🛠 **사용된 기술**
### **주요 기술 / 라이브러리**
- **언어**: Java 17
- **프레임워크**: Spring Boot (3.4.1)
- **빌드 도구**: Gradle
- **데이터베이스**: MariaDB, Redis
- **메시징 시스템**: Kafka
- **템플릿 엔진**: Thymeleaf, Thymeleaf Layout Dialect
- **웹 소켓 및 채팅**: Spring WebSocket, SockJS
- **크롤링 및 자동화**: Selenium
- **데이터 매핑 및 API 레이어**:
    - Querydsl
    - MapStruct
- **JWT 인증**:
    - 기반 로그인 인증 및 권한 관리
- **기타**:
    - Spring Security (인증 및 권한 관리)
    - Spring Mail (이메일 서비스)
    - Spring Integration Redis (Redis 연동)

---

## 💼 **구성**
프로젝트는 두 개의 주요 모듈로 나뉘어 있습니다: **ADMIN**, **TASK**와 **인증 모듈**.

### **1. ADMIN 모듈**
- **주요 기능**
    1. **유저별 주식 설정**:
        - 사용자는 자신이 관심 있는 주식 및 매수/매도 규칙을 설정할 수 있습니다.
        - 특정 주식의 가격 변동 조건(예: 특정 퍼센트 이상 상승/하락)에 따라 **알림**을 발송하거나 **화면**에 정보를 표시할 수 있습니다.

    2. **게스트 초대 및 공유**:
        - 사용자는 설정한 주식 정보 및 규칙을 게스트 사용자와 공유 가능하며, 게스트는 호스트가 적용한 주식 매수/매도 조건에 따라 알림을 받고 해당 작업을 진행할 수 있습니다.

    3. **실시간 데이터 크롤링**:
        - Selenium을 활용하여 주식의 현재가 데이터를 크롤링하고 이를 기반으로 매수/매도 의사 결정을 지원합니다.

    4. **채팅 기능**:
        - 사용자 간의 실시간 커뮤니케이션 (게스트/호스트).
        - WebSocket을 기반으로 구현, SockJS 및 Redis, Kafka를 활용.

- **주요 기술**
    - Spring Boot, Spring Data JPA, QueryDSL
    - Jsoup (웹 크롤링)
    - WebSocket, SockJS
    - Spring Security

---

### **2. TASK 모듈**
- **주요 기능**
    1. **알림 시스템**:
        - 주식 매수/매도 조건을 통한 알림 발송.
        - **Kafka**를 활용한 메시지 큐 기반으로 **이메일 서비스** 제공.

    2. **에러 처리**:
        - 발생하는 애플리케이션 에러를 메일 알림으로 개발자에게 발송.

    3. **스케줄링 및 데이터 관리**:
        - 주식 관련 데이터(예: 현재가, 매수/매도 기록)를 **스케줄링**하여 정기적으로 RDB와 Redis에 업데이트.

    4. **채팅 데이터 관리**:
        - Kafka 및 Redis를 활용한 **빠르고 안정적인 채팅 기능** 구현.
        - 메시지의 단기 보관과 저장을 포함한 Redis 연계.

- **주요 기술**
    - Spring Boot, Spring Data Redis, Spring Kafka
    - Kafka (메시징 시스템)
    - Redis (채팅 데이터 캐싱 및 기타)
    - Spring Scheduler (스케줄링 작업)

---

## 📈 **프로젝트 흐름도**
### **ADMIN 모듈**
1. **사용자 주식 설정**
    - 주식 및 매수/매도 규칙 설정 →
    - 실시간 크롤링 데이터 기반 알림 발송 또는 주식 정보 화면 표시.

2. **게스트 초대 및 공유**
    - 게스트는 호스트가 설정한 규칙에 따라 알림을 받고 매매 참여.

---

### **TASK 모듈**
1. **스케줄링**:
    - 주식 실시간 데이터 업데이트 → Redis 및 MariaDB 저장.

2. **알림 처리**:
    - Kafka 메시징 → 사용자 이메일 알림 발송.

3. **채팅 데이터 관리**:
    - Kafka와 Redis를 통해 실시간 채팅 데이터 처리.

---

## 🔔 **특징 및 장점**
1. **자동화**:
    - 주식 크롤링부터 데이터 업데이트 및 알림까지 모든 프로세스를 완전히 자동화하여 사용자 편의성 극대화.

2. **실시간성**:
    - 실시간 데이터 기반으로 법칙 실행 및 결과 표시.
    - WebSocket 및 Redis를 활용한 빠른 채팅 서비스 제공.

3. **확장성**:
    - Kafka 및 Redis를 활용하여 대규모 트래픽 및 데이터 처리가 가능한 구조 설계.

4. **보안 강화**:
    - JWT 기반으로 인증 절차를 간소화했으며, Refresh Token을 사용해 인증 정보 손실 위협을 줄였습니다.
    - HTTP Only 쿠키를 활용하여 클라이언트 측 XSS(교차 사이트 스크립팅) 공격 예방.

5. **사용자 친화적**:
    - 게스트 초대 및 공유 기능을 통해 주식 설정 내용을 손쉽게 공유 가능.
    - 시각적으로 간단하고 알림 기능이 직관적.

6. **안정성**:
    - 에러 발생 시 메일로 즉각 알림하여 빠른 대응 가능.
    - 메시지 큐(Kafka)를 기반으로 메시지 유실 방지.
